SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}")"  && pwd)"
EXECUTE_DIR=" $(cd -P "$(dirname "${BASH_SOURCE[0]}")/../.." && pwd)"

function backup_hc_data() {
    source "$EXECUTE_DIR/.settings"
    source "$EXECUTE_DIR/tools/default_dettings"
    . "$SCRIPT_DIR/kill_game"

    if [ ! -d "$GAME_DATA_BACKUP_FOLDER_PATH" ]; then
        mkdir -p "$GAME_DATA_BACKUP_FOLDER_PATH"
    fi

    kill_game

    if [ -e "$GAME_DATA_BACKUP_FOLDER_PATH/trpaks.tar" ]; then
        rm -rf "$GAME_DATA_BACKUP_FOLDER_PATH/trpaks.tar"
    fi

    if [ -e "$GAME_DATA_BACKUP_FOLDER_PATH/hcdata.tar" ]; then
        rm -rf "$GAME_DATA_BACKUP_FOLDER_PATH/hcdata.tar"
    fi

    cd "$GAME_DIR"
    tar cf "$GAME_DATA_BACKUP_FOLDER_PATH/trpaks.tar" "files/save/paks" "files/save/trpaks"
    cd "/sdcard/Android/data"
    tar cf "$GAME_DATA_BACKUP_FOLDER_PATH/hcdata.tar" "$GAME_NAME/files/assetcache/*"
    cd "$GAME_DIR"
    tar cf "$GAME_DATA_BACKUP_FOLDER_PATH/trpaks.tar" "files/save/paks" "files/save/trpaks"
    cd "$OLDPWD"
    echolor -Y "Backup of game data created in: "
    echolor -C "$GAME_DATA_BACKUP_FOLDER_PATH"
}
